# Tree Style History - MV3 版本安装指南

## 🚀 快速安装

### 方法 1: 开发者模式安装（推荐）

1. **下载扩展文件**
   - 确保你有完整的 `chrome/` 目录
   - 包含 `manifest-v3.json` 文件

2. **打开 Chrome 扩展管理页面**
   - 在地址栏输入: `chrome://extensions/`
   - 或者: 菜单 → 更多工具 → 扩展程序

3. **启用开发者模式**
   - 在页面右上角打开"开发者模式"开关

4. **加载扩展**
   - 点击"加载已解压的扩展程序"
   - 选择包含 `manifest-v3.json` 的 `chrome/` 目录
   - 点击"选择文件夹"

5. **验证安装**
   - 扩展应该出现在扩展列表中
   - 状态显示为"已启用"
   - 工具栏应该显示扩展图标

### 方法 2: 打包安装

1. **打包扩展**
   - 在 `chrome://extensions/` 页面
   - 找到已加载的扩展
   - 点击"打包扩展程序"
   - 选择 `chrome/` 目录
   - 点击"打包扩展程序"

2. **安装 .crx 文件**
   - 将生成的 .crx 文件拖拽到扩展管理页面
   - 确认安装

## ✅ 功能验证

安装完成后，请验证以下功能：

### 1. 基本功能
- [ ] 点击扩展图标，弹出窗口正常显示
- [ ] 右键点击网页，显示"Search Site History"选项
- [ ] 快捷键工作正常（Ctrl+Shift+H 等）

### 2. 历史记录功能
- [ ] 最近历史记录正常显示
- [ ] 最近关闭的标签页正常显示
- [ ] 书签功能正常

### 3. 选项页面
- [ ] 点击扩展图标中的设置按钮
- [ ] 选项页面正常打开
- [ ] 设置可以正常保存

## 🔧 故障排除

### 常见问题

**Q: 扩展无法加载**
- 确保选择了正确的目录（包含 manifest-v3.json）
- 检查浏览器版本是否支持 MV3（Chrome 88+）

**Q: 弹出窗口不显示**
- 检查控制台是否有错误信息
- 确认所有文件路径正确

**Q: 右键菜单不显示**
- 检查扩展权限是否正确
- 确认上下文菜单已启用

**Q: 快捷键不工作**
- 检查扩展快捷键设置
- 确认没有其他扩展冲突

### 调试步骤

1. **查看错误信息**
   - 右键点击扩展图标 → 检查弹出内容
   - 查看控制台错误信息

2. **检查 Service Worker**
   - 访问 `chrome://extensions/`
   - 找到扩展，点击"Service Worker"链接
   - 查看控制台输出

3. **重新加载扩展**
   - 在扩展管理页面点击"重新加载"按钮

## 📋 系统要求

- **浏览器**: Chrome 88.0 或更高版本
- **操作系统**: Windows, macOS, Linux
- **内存**: 建议 4GB 或更多
- **存储**: 至少 100MB 可用空间

## 🔄 从 MV2 版本迁移

如果你之前安装了 MV2 版本：

1. **备份设置**（可选）
   - 导出扩展设置
   - 记录自定义配置

2. **卸载旧版本**
   - 在扩展管理页面禁用并移除旧版本

3. **安装新版本**
   - 按照上述步骤安装 MV3 版本

4. **恢复设置**（可选）
   - 导入之前备份的设置

## 📞 获取帮助

如果遇到问题：

1. 查看 `MV3_MIGRATION_README.md` 获取详细信息
2. 运行 `node test-mv3.js` 检查扩展状态
3. 检查浏览器控制台错误信息
4. 提交 Issue 到项目仓库

## 🎉 安装成功

恭喜！你现在使用的是 Tree Style History 的 MV3 版本，享受更安全、更高效的浏览体验！

---

**版本**: 3.1.13 (MV3)
**兼容性**: Chrome 88+, Edge 88+, 其他基于 Chromium 的浏览器